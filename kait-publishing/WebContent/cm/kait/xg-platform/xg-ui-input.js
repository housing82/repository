(function(){"use strict";!function(a,b){return"function"==typeof define&&define.amd?define("XgUIInput",["jquery","XgCommon","XgUICommon"],b):a.XgUIInput=b(a.jQuery,a.XgCommon,a.XgUICommon)}(window,function(a,b,c){var d,e,f="xg-ui-input.js";return XgPlatform.XgLogger.info(function(){return f+" : load start"}),e=function(d,e){var f,g,h=d.data("xg-bind-option"),i="change",j={},k=d.data("xg-bind-data-set"),l=d.data("xg-bind-data-table-id"),m=k.getDataTable(l);return c.setUUID(d),k.bindComponent(d,"jqxInput"),h||(h={mode:"read",sync:!0,immediately:!0,bind:{type:"column"}},d.data("xg-bind-option",h)),a.extend(!0,j,h,e),d.data("xg-bind-option",j),c.setBindColInfo(m,j),c.removeEvents(d,["keyup","input","change","xg-bind-event"]),f=function(){return k.$eventEmitter.trigger("xg-bind-event",{uuid:d.data("xg-uuid"),eventName:"setValue",bind:j.bind,rowIdx:m.getRowPos(),value:d.jqxInput("val"),xgDataTableId:l})},"write"===j.mode&&(i=j.immediately?"keyup input":"change",d.on(i,f)),("write"===(g=j.mode)||"read"===g)&&d.on("xg-bind-event",function(c,e){var g,h,k,n,o,p,q,r;if(a(this).data("xg-uuid")===e.uuid||e.xgDataTableId!==l)return!1;if("setRowPos"===e.eventName){if(q=e.rowIdx,p=m.getRow(q),r=p.status,g=j.bind.columnIndex,d.data("xg-target-index",q),"column"===j.bind.type?o=p[g]:"row"===j.bind.type&&(o=p.toString()),void 0===o&&(o=null),"change"===i&&d.off("change"),d.jqxInput("val",o),"change"===i&&d.on("change",f),j.sync===!0&&d.jqxInput("disabled")!==!0&&(n=r===b.constant.STATUS.DELETE||r!==b.constant.STATUS.INSERT&&((h=m.getColumnConstraint(g))===b.constant.CONSTRAINT.KEY||h===b.constant.CONSTRAINT.SEQUENCE),d.jqxInput("disabled")!==n))return d.jqxInput({disabled:n})}else{if("xgDataTableInit"===e.eventName)return d.jqxInput("val",""),d.jqxInput({disabled:!1});if(k=d.data("xg-target-index"),e.rowIdx!==k)return!1;if("setValue"===e.eventName)"column"===j.bind.type&&e.bind.column===j.bind.column&&e.value.toString()!==d.jqxInput("val").toString()&&d.jqxInput("val",e.value),"row"===j.bind.type&&e.rowValue&&e.rowValue&&e.rowValue.toString()!==d.jqxInput("val")&&d.jqxInput("val",e.rowValue.toString());else if("deleteRow"===e.eventName&&j.sync)return d.jqxInput({disabled:!0})}}),d},a.fn.xgInput=function(){var c,d,g,h,i,j,k=this.selector||this,l=arguments;if(a(this).attr("data-xg-input",""),XgPlatform.XgLogger.debug(function(){return["XgUIInput",k,l]}),arguments[0]instanceof Object){if(d=b.getIEVersion(),-1!==d&&10>d&&delete arguments[0].placeHolder,i=arguments[0],i.xgInitOption){if(h={},g=a(this).data("xg-init-option"),a.extend(!0,h,g,i.xgInitOption),a(this).data("xg-init-option",h),"string"==typeof i.xgInitOption.xgDataSet&&(i.xgInitOption.xgDataSet=b.getDataSet(i.xgInitOption.xgDataSet)),"string"==typeof i.xgInitOption.xgDataTable){if(!i.xgInitOption.xgDataSet)throw new b.Error("Require xgDataSet option property",f);i.xgInitOption.xgDataTable=i.xgInitOption.xgDataSet.getDataTable(i.xgInitOption.xgDataTable)}return a(this).data("xg-bind-data-set",i.xgInitOption.xgDataSet),a(this).data("xg-bind-data-table-id",i.xgInitOption.xgDataTable.getId()),j=i.xgBindOption,b.deleteProperties(i,["xgInitOption","xgBindOption"]),c=a(this).jqxInput(i),j&&e(c,j,i),c}}else if("string"==typeof arguments[0]){if("xgInitOption"===arguments[0])return a(this).data("xg-init-option");if("xgBindOption"===arguments[0])return a(this).data("xg-bind-option")}return a.fn.jqxInput.apply(this,arguments)},d=function(){var b=Array.prototype.slice.call(arguments,0,1)[0],c=Array.prototype.slice.call(arguments,1)[0];return c?a(b).xgInput(c):a(b).xgInput(),a(b)},a(document).ready(function(){var b,c,d,e,f,g=a("[data-xg-input]"),h=[];for(e=0,f=g.length;f>e;++e)d=g[e],b=a(d),c=b.data("xg-option"),c&&b.xgInput(c),h.push(c?void 0:b.xgInput());return h}),XgPlatform.XgLogger.info(function(){return f+" : load end"}),d})}).call(this);