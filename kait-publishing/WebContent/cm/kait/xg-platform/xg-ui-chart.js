(function(){"use strict";!function(a,b){return"function"==typeof define&&define.amd?define("XgUIChart",["jquery","XgCommon","XgUICommon"],b):a.XgUIChart=b(a.jQuery,a.XgCommon,a.XgUICommon)}(window,function(a,b,c){var d,e,f;return f="xg-ui-chart.js",XgPlatform.XgLogger.info(function(){return f+" : load start"}),e=function(d,e,f){var g,h,i,j,k;return c.setUUID(d),j=d.data("xg-bind-data-set"),k=d.data("xg-bind-data-table"),d.data("xg-bind-data-table-id",k.getId()),j.bindComponent(d,"jqxChart"),g=d.data("xg-bind-option"),g||(g={bind:{type:"row",column:void 0}}),h={},a.extend(!0,h,g,e),c.setBindColInfo(k,h),d.data("xg-bind-option",h),c.removeEvents(d,["xg-bind-event"]),f.source&&d.data("xg-ui-adapter",f.source),i=d.jqxChart("source"),"row"===h.bind.type&&(i.records=[{}],d.jqxChart({source:i})),d.on("xg-bind-event",function(f,g){var j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;if(I=d.jqxChart("seriesGroups"),a(this).data("xg-uuid")===g.uuid)return!1;if(k.getId()!==g.xgDataTableId)return!1;if("setRowPos"===g.eventName&&(F=k.getRow(k.getRowPos()),"row"===h.bind.type)){for(J={},y=k.header,l=n=0,s=y.length;s>n;l=++n)j=y[l],m=j[b.constant.COLUMN.TYPE_OF_GAUCE],w=F[j[b.constant.COLUMN.INDEX]],J[j[b.constant.COLUMN.NAME]]=w,i.records.length&&(i.records[0][j[b.constant.COLUMN.NAME]]=w);i.records.length||(i.records=[J],d.jqxChart({source:i})),d.jqxChart("update")}if("setValue"===g.eventName){if("row"===h.bind.type&&k.getRowPos()===g.rowIdx){if(!i.records.length){for(F={},F["*xgRowStatus"]=b.constant.STATUS.INSERT,H=k.getRow(k.getRowPos()),z=k.header,p=0,t=z.length;t>p;p++)j=z[p],F[j[b.constant.COLUMN.NAME]]=H[j[b.constant.COLUMN.INDEX]];i.records.push(F)}i.records[0][g.bind.column]=g.value}if("column"===h.bind.type){for(A=i.records,o=q=0,u=A.length;u>q;o=++q)x=A[o],x["*xgRowIdx"]===g.rowIdx&&(i.records[o][g.bind.column]=g.value);if(i.xAxis&&i.records.sort(function(a,c){var d,e;return e=a[i.xAxis],d=c[i.xAxis],"string"==typeof e&&e.indexOf("-")>-1&&b.isValidDate(e)&&(e=new Date(e).getTime()),"string"==typeof d&&d.indexOf("-")>-1&&b.isValidDate(d)&&(d=new Date(d).getTime()),e-d}),1===I.length&&("pie"===(B=I[0].type)||"donut"===B)){for(E=!1,C=I[0].series,r=0,v=C.length;v>r;r++)if(G=C[r],G.dataField===g.bind.column){E=!0;break}return void(E&&d.jqxChart("refresh"))}}"rows"===h.bind.type&&(i.records[g.rowIdx][g.bind.column]=g.value),d.jqxChart("update")}return"addRow"===g.eventName&&("column"===(D=h.bind.type)||"rows"===D)&&(L=d.jqxChart("xAxis"),K=c.createUIAdapter(k,"xgChart",L.dataField),i.records=K.records,d.jqxChart({source:i}),d.jqxChart("refresh")),"xgDataTableInit"===g.eventName?e?"row"===h.bind.type?(i.records=[{}],d.jqxChart("update")):(L=d.jqxChart("xAxis"),K=c.createUIAdapter(k,"xgChart",L.dataField),i.records=K.records,d.jqxChart({source:i}),d.jqxChart("refresh")):d.jqxChart("refresh"):void 0}),d},a.fn.xgChart=function(){var d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(a(this).attr("data-xg-chart",""),h=this,this.selector&&(h=this.selector),r=arguments,XgPlatform.XgLogger.debug(function(){return["XgUIChart",h,r]}),arguments[0]instanceof Object&&(n=arguments[0],null!==(o=n.width)&&void 0!==o&&(t=n.width,"number"==typeof n.width&&(t+="px"),a(this).css("width",t)),null!==(p=n.height)&&void 0!==p&&(i=n.height,"number"==typeof n.height&&(i+="px"),a(this).css("height",i)),b.deleteProperties(n,["width","height"]),n.xgInitOption)){if(l={},j=a(this).data("xg-init-option"),a.extend(!0,l,j,n.xgInitOption),a(this).data("xg-init-option",l),w=void 0,"string"==typeof n.xgInitOption.xgDataSet&&(n.xgInitOption.xgDataSet=b.getDataSet(n.xgInitOption.xgDataSet)),"string"==typeof n.xgInitOption.xgDataTable){if(!n.xgInitOption.xgDataSet)throw new b.Error("Require xgDataSet option property",f);w=n.xgInitOption.xgDataSet.getDataTable(n.xgInitOption.xgDataTable)}return"object"==typeof n.xgInitOption.xgDataTable&&(w=n.xgInitOption.xgDataTable),a(this).data("xg-bind-data-set",n.xgInitOption.xgDataSet),a(this).data("xg-bind-data-table",w),u=void 0,n.xAxis&&n.xAxis.dataField&&(u=n.xAxis.dataField),s=w.uiAdapter,n.xgBindOption?(k=c.createUIAdapter(w,"xgChart",u),k.xAxis=u,n.source=k,v=n.xgBindOption,b.deleteProperties(n,["xgInitOption","xgBindOption"]),d=a(this).jqxChart(n),e(d,v,n)):(b.deleteProperties(n,["xgInitOption"]),s?n.source=s:(w.uiAdapter=c.createUIAdapter(w,"xgGrid"),n.source=w.uiAdapter),d=a(this).jqxChart(n)),d}if("string"==typeof arguments[0]){if("width"===(q=arguments[0])||"height"===q)return m=arguments[0],g=a(this).data("xg-bind-option"),g?g[m]:void 0;if("xgInitOption"===arguments[0])return a(this).data("xg-init-option");if("xgBindOption"===arguments[0])return a(this).data("xg-bind-option")}return a.fn.jqxChart.apply(this,arguments)},d=function(){var b,c;return b=Array.prototype.slice.call(arguments,0,1)[0],c=Array.prototype.slice.call(arguments,1)[0],c||a(b).xgChart(),c&&a(b).xgChart(c),a(b)},a(document).ready(function(){var b,c,d,e,f,g,h,i;for(h=a("[data-xg-chart]"),i=[],f=e=0,g=h.length;g>e;f=++e)d=h[f],b=a(d),c=b.data("xg-option"),c&&b.xgChart(c),i.push(c?void 0:b.xgChart());return i}),XgPlatform.XgLogger.info(function(){return f+" : load end"}),d})}).call(this);