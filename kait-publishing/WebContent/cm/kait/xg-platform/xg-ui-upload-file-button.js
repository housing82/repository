(function(){"use strict";!function(a,b){return"function"==typeof define&&define.amd?define("XgUIUploadFileButton",["jquery","json3","XgCommon","XgUICommon","XgUIButton"],b):a.XgUIUploadFileButton=b(a.jQuery,a.JSON,a.XgCommon,a.XgUICommon)}(window,function(a,b,c,d){var e,f="xg-ui-upload-file-button.js";return XgPlatform.XgLogger.info(function(){return f+" : load start"}),a.fn.xgUploadFileButton=function(){var e,f,g,h,i,j,k,l=a(this),m=this,n=arguments;return XgPlatform.XgLogger.debug(function(){return["XgUIUploadFileButton",m.selector||m,n]}),l.data("xg-uuid")||(d.setUUID(l),l.attr("data-xg-upload-file-button","")),"string"==typeof arguments[0]&&"destroy"===arguments[0]&&(k=l.data("xg-uuid"),a("form[id='xg-form-"+k+"']").remove(),a("iframe[id='xg-iframe-"+k+"']").remove()),arguments[0]instanceof Object&&arguments[0].xgInitOption&&(i={},h=l.data("xg-init-option"),h=h||{actionUrl:"/XG/ix-upload.file"},a.extend(!0,i,h,arguments[0].xgInitOption),i.actionUrl&&i.actionUrl.lastIndexOf("/")===i.actionUrl.length-1&&(i.actionUrl=i.actionUrl.substr(0,i.actionUrl.length-1)),l.data("xg-init-option",i),h=i,delete arguments[0].xgInitOption,k=k||l.data("xg-uuid"),j=h.text||"파일추가",a("#xg-form-"+k).remove(),a("#xg-iframe-"+k).remove(),f=a("<form id='xg-form-"+k+"' name='xg-form-"+k+"' style='display:inline-block;vertical-align:top;' method='post' action='"+i.actionUrl+"' target='xg-iframe-"+k+"' enctype='multipart/form-data' accept-charset='UTF-8'><div>"+j+("<input id='xg-input-upload-"+k+"' type='file' name='UPLOAD_FILE' style='position:absolute;top:0;right:0;margin:0;opacity:0;direction:ltr;cursor:pointer;width:100%;height:100%;-ms-filter:")+"'alpha(opacity=0)';'></div></form>"+("<iframe id='xg-iframe-"+k+"' name='xg-iframe-"+k+"' style='display:none'></iframe>")),l.before(f),l.css("display","none"),g=f.find("div"),e=g.find('input[type="file"]'),e.on("change",function(){var d,e,f,i,j=g.height(),l=g.width();return g.css("visibility","hidden"),d&&d.remove(),d=a('<div style="overflow: hidden; position: absolute;"></div>'),i=a('<div style="z-index: 99999; margin-top: -10px; left: 50%; top: 50%; padding-left: 1px; position: relative; width: 18px; height: 18px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #fff; border-collapse: collapse;"><div style="float: left;"><div style="width: 16px; height: 16px;" class="jqx-file-upload-loader"/></div></div>'),i.addClass("jqx-rc-all"),d.addClass("jqx-rc-all"),i.addClass("jqx-fill-state-normal"),d.append(i),d.width(l),d.height(j),g.before(d),e=a("#xg-form-"+k),f=a("#xg-iframe-"+k),f.off("load"),f.load(function(){var f,i,j,l,m={},n=a(this.contentDocument).find("body > pre");n.length||(n=a(this.contentDocument).find("body")),f=b.parse(n.html()),l=f["@issuccess"],j=f.message,l===!0&&(m.name=f.files[0].fileName,m.size=f.files[0].fileSize,m.id=f.files[0].fileId),"function"==typeof h.uploadResult&&h.uploadResult(l,j,m),c.isOlderBrowser()?(i=document.forms["xg-form-"+k],i.reset()):e[0].reset(),g.css("visibility","visible"),d&&d.remove()}),e.submit()}),m.target=g,m.target.xgButton.apply(m.target,arguments)),m},e=function(){var b=Array.prototype.slice.call(arguments,0,1)[0],c=Array.prototype.slice.call(arguments,1,2)[0];return c?a(b).xgUploadFileButton(c):a(b).xgUploadFileButton(),a(b)},a(document).ready(function(){var b,c,d,e,f,g=a("[ data-xg-upload-file-button ]");for(e=0,f=g.length;f>e;++e)d=g[e],b=a(d),c=b.data("xg-option"),c&&b.xgUploadFileButton(c)}),XgPlatform.XgLogger.info(function(){return f+" : load end"}),e})}).call(this);