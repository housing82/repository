(function(){"use strict";!function(a,b){return"function"==typeof define&&define.amd?define("XgUIUploadFileButton",["jquery","json3","XgCommon","XgUICommon","XgUIButton"],b):a.XgUIUploadFileButton=b(a.jQuery,a.JSON,a.XgCommon,a.XgUICommon)}(window,function(a,b,c,d){var e,f;return f="xg-ui-upload-file-button.js",XgPlatform.XgLogger.info(function(){return f+" : load start"}),a.fn.xgUploadFileButton=function(){var e,f,g,h,i,j,k,l,m,n;return k=this,h=a(this),l=arguments,XgPlatform.XgLogger.debug(function(){return["XgUIUploadFileButton",k.selector||k,l]}),h.data("xg-uuid")||(d.setUUID(h),h.attr("data-xg-upload-file-button","")),"string"==typeof arguments[0]&&"destroy"===arguments[0]&&(n=h.data("xg-uuid"),a("form[id='xg-form-"+n+"']").remove(),a("iframe[id='xg-iframe-"+n+"']").remove()),arguments[0]instanceof Object&&arguments[0].xgInitOption&&(j={},i=h.data("xg-init-option"),i=i||{actionUrl:"/XG/ix-upload.file"},a.extend(!0,j,i,arguments[0].xgInitOption),j.actionUrl&&j.actionUrl.lastIndexOf("/")===j.actionUrl.length-1&&(j.actionUrl=j.actionUrl.substr(0,j.actionUrl.length-1)),h.data("xg-init-option",j),i=j,delete arguments[0].xgInitOption,n=n||h.data("xg-uuid"),m=i.text||"파일추가",a("#xg-form-"+n).remove(),a("#xg-iframe-"+n).remove(),f=a("<form id='xg-form-"+n+"' name='xg-form-"+n+"' style='display:inline-block;vertical-align:top;' method='post' action='"+j.actionUrl+"' target='xg-iframe-"+n+"' enctype='multipart/form-data' accept-charset='UTF-8'><div>"+m+("<input id='xg-input-upload-"+n+"' type='file' name='UPLOAD_FILE' style='position:absolute;top:0;right:0;margin:0;opacity:0;direction:ltr;cursor:pointer;width:100%;height:100%;-ms-filter:")+"'alpha(opacity=0)';'></div></form>"+("<iframe id='xg-iframe-"+n+"' name='xg-iframe-"+n+"' style='display:none'></iframe>")),h.before(f),h.css("display","none"),g=f.find("div"),e=g.find('input[type="file"]'),e.on("change",function(){var d,e,f,h,j,k;return k=g.width(),j=g.height(),g.css("visibility","hidden"),d&&d.remove(),d=a('<div style="overflow: hidden; position: absolute;"></div>'),h=a('<div style="z-index: 99999; margin-top: -10px; left: 50%; top: 50%; padding-left: 1px; position: relative; width: 18px; height: 18px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #ffffff; border-collapse: collapse;"><div style="float: left;"><div style="width: 16px; height: 16px;" class="jqx-file-upload-loader"/></div></div>'),h.addClass("jqx-rc-all"),d.addClass("jqx-rc-all"),h.addClass("jqx-fill-state-normal"),d.append(h),d.width(k),d.height(j),g.before(d),e=a("#xg-form-"+n),f=a("#xg-iframe-"+n),f.off("load"),f.load(function(){var f,h,j,k,l,m;return m=a(this.contentDocument).find("body > pre"),m.length||(m=a(this.contentDocument).find("body")),f=b.parse(m.html()),l=f["@issuccess"],k=f.message,h={},l===!0&&(h.name=f.files[0].fileName,h.size=f.files[0].fileSize,h.id=f.files[0].fileId),"function"==typeof i.uploadResult&&i.uploadResult(l,k,h),c.isOlderBrowser()?(j=document.forms["xg-form-"+n],j.reset()):e[0].reset(),g.css("visibility","visible"),d?d.remove():void 0}),e.submit()}),k.target=g,k.target.xgButton.apply(k.target,arguments)),k},e=function(){var b,c;return b=Array.prototype.slice.call(arguments,0,1)[0],c=Array.prototype.slice.call(arguments,1,2)[0],c?a(b).xgUploadFileButton(c):a(b).xgUploadFileButton(),a(b)},a(document).ready(function(){var b,c,d,e,f,g,h,i;for(h=a("[ data-xg-upload-file-button ]"),i=[],f=e=0,g=h.length;g>e;f=++e)d=h[f],b=a(d),c=b.data("xg-option"),i.push(c?b.xgUploadFileButton(c):void 0);return i}),XgPlatform.XgLogger.info(function(){return f+" : load end"}),e})}).call(this);